{"ast":null,"code":"import { ethers } from 'ethers';\n\n// Official Fluent testnet configuration\nconst FLUENT_TESTNET_CONFIG = {\n  chainId: '0x51EA',\n  // 20994 in hex\n  chainName: 'Fluent Testnet',\n  nativeCurrency: {\n    name: 'ETH',\n    symbol: 'ETH',\n    decimals: 18\n  },\n  rpcUrls: ['https://rpc.testnet.fluent.xyz'],\n  blockExplorerUrls: ['https://testnet.fluentscan.xyz/']\n};\nclass WalletManager {\n  constructor() {\n    this.provider = null;\n    this.signer = null;\n    this.account = null;\n    this.isConnected = false;\n    this.pendingRequests = new Set();\n  }\n  async checkMetaMask() {\n    // Check if ethereum object exists\n    if (typeof window === 'undefined') {\n      throw new Error('This application requires a browser environment.');\n    }\n\n    // Wait for MetaMask to inject properly\n    let attempts = 0;\n    while (attempts < 50) {\n      // Try for up to 5 seconds\n      if (window.ethereum && window.ethereum.isMetaMask) {\n        return true;\n      }\n      await new Promise(resolve => setTimeout(resolve, 100));\n      attempts++;\n    }\n\n    // Final check for any ethereum provider\n    if (window.ethereum) {\n      console.warn('Ethereum provider found but not confirmed as MetaMask');\n      return true;\n    }\n    throw new Error('MetaMask is required to use this dApp.');\n  }\n\n  // Check if already connected (for page refresh)\n  async checkExistingConnection() {\n    try {\n      if (!window.ethereum) return false;\n      const accounts = await window.ethereum.request({\n        method: 'eth_accounts'\n      });\n      if (accounts.length > 0) {\n        this.provider = new ethers.BrowserProvider(window.ethereum);\n        this.signer = await this.provider.getSigner();\n        this.account = accounts[0];\n        this.isConnected = true;\n        console.log('Existing wallet connection restored:', this.account);\n        return true;\n      }\n      return false;\n    } catch (error) {\n      console.error('Error checking existing connection:', error);\n      return false;\n    }\n  }\n  async connectWallet(skipNetworkSwitch = false) {\n    try {\n      await this.checkMetaMask();\n\n      // Safely access ethereum object with error handling\n      const ethereum = window.ethereum;\n      if (!ethereum) {\n        throw new Error('Ethereum provider not found');\n      }\n\n      // Prevent multiple simultaneous requests\n      if (this.pendingRequests.has('connect')) {\n        throw new Error('Connection request in progress, please wait...');\n      }\n      this.pendingRequests.add('connect');\n      try {\n        // Request account access\n        const accounts = await ethereum.request({\n          method: 'eth_requestAccounts'\n        });\n        if (accounts.length === 0) {\n          throw new Error('No accounts found. Please connect your wallet.');\n        }\n        this.provider = new ethers.BrowserProvider(ethereum);\n        this.signer = await this.provider.getSigner();\n        this.account = accounts[0];\n        this.isConnected = true;\n\n        // Only check network if not explicitly skipped\n        if (!skipNetworkSwitch) {\n          // Try to switch to Fluent testnet (completely optional)\n          try {\n            console.log('Attempting to check/switch network...');\n            await this.switchToFluentTestnet();\n            console.log('Network check/switch completed');\n          } catch (networkError) {\n            console.log('Network switch skipped:', networkError.message);\n            // Silently continue - network switch is completely optional during connection\n          }\n        } else {\n          console.log('Network switch skipped by request');\n        }\n      } finally {\n        this.pendingRequests.delete('connect');\n      }\n\n      // Listen for account changes (remove existing listeners first)\n      if (this.accountChangeListener) {\n        ethereum.removeListener('accountsChanged', this.accountChangeListener);\n      }\n      this.accountChangeListener = accounts => {\n        if (accounts.length === 0) {\n          this.disconnect();\n        } else {\n          this.account = accounts[0];\n          window.location.reload(); // Reload to refresh the app state\n        }\n      };\n      ethereum.on('accountsChanged', this.accountChangeListener);\n\n      // Listen for network changes (remove existing listeners first)\n      if (this.chainChangeListener) {\n        ethereum.removeListener('chainChanged', this.chainChangeListener);\n      }\n      this.chainChangeListener = chainId => {\n        console.log('Network changed to:', chainId);\n        window.location.reload(); // Reload to refresh the app state\n      };\n      ethereum.on('chainChanged', this.chainChangeListener);\n      return {\n        account: this.account,\n        provider: this.provider,\n        signer: this.signer\n      };\n    } catch (error) {\n      console.error('Error connecting wallet:', error);\n      throw error;\n    }\n  }\n  async checkNetwork() {\n    try {\n      const ethereum = window.ethereum;\n      if (!ethereum) {\n        return {\n          isCorrect: false,\n          error: 'Ethereum provider not available'\n        };\n      }\n      const chainId = await ethereum.request({\n        method: 'eth_chainId'\n      });\n      const isFluentNetwork = chainId.toLowerCase() === '0x51ea';\n      if (!isFluentNetwork) {\n        console.warn('Not on Fluent testnet. Current chain ID:', chainId);\n        return {\n          isCorrect: false,\n          currentChainId: chainId,\n          expectedChainId: '0x51ea'\n        };\n      }\n      return {\n        isCorrect: true,\n        currentChainId: chainId,\n        expectedChainId: '0x51ea'\n      };\n    } catch (error) {\n      console.error('Error checking network:', error);\n      return {\n        isCorrect: false,\n        error: error.message\n      };\n    }\n  }\n  async switchToFluentTestnet() {\n    const requestKey = 'switchNetwork';\n\n    // Prevent duplicate requests\n    if (this.pendingRequests.has(requestKey)) {\n      console.log('Network switch already in progress, waiting...');\n      return;\n    }\n    try {\n      this.pendingRequests.add(requestKey);\n\n      // Safely get ethereum object\n      const ethereum = window.ethereum;\n      if (!ethereum) {\n        throw new Error('Ethereum provider not available');\n      }\n\n      // First check current network with multiple format checks\n      const currentChainId = await ethereum.request({\n        method: 'eth_chainId'\n      });\n      console.log('Current chain ID (raw):', currentChainId);\n\n      // Convert to number for comparison\n      const currentChainIdNum = parseInt(currentChainId, 16);\n      const fluentChainIdNum = parseInt(FLUENT_TESTNET_CONFIG.chainId, 16); // 20994\n\n      console.log('Current chain ID (decimal):', currentChainIdNum);\n      console.log('Fluent chain ID (decimal):', fluentChainIdNum);\n\n      // If already on Fluent testnet, return immediately\n      if (currentChainIdNum === fluentChainIdNum) {\n        console.log('Already on Fluent testnet - no action needed');\n        return;\n      }\n\n      // Try to switch to existing network first\n      try {\n        await ethereum.request({\n          method: 'wallet_switchEthereumChain',\n          params: [{\n            chainId: FLUENT_TESTNET_CONFIG.chainId\n          }]\n        });\n        console.log('Successfully switched to Fluent testnet');\n        return;\n      } catch (switchError) {\n        console.log('Switch failed:', switchError.code, switchError.message);\n\n        // Only add network if it doesn't exist (error 4902)\n        if (switchError.code === 4902) {\n          console.log('Network not found, attempting to add...');\n          await ethereum.request({\n            method: 'wallet_addEthereumChain',\n            params: [FLUENT_TESTNET_CONFIG]\n          });\n          console.log('Successfully added and switched to Fluent testnet');\n          return;\n        } else if (switchError.code === -32002) {\n          // Request already pending - just wait and return\n          console.log('Request already pending - continuing without network switch');\n          return;\n        } else {\n          throw switchError;\n        }\n      }\n    } catch (error) {\n      console.error('Failed to switch to Fluent testnet:', error);\n\n      // Handle different error cases\n      if (error.code === 4001) {\n        console.log('User rejected network switch - continuing with current network');\n        return; // Don't throw error, just continue\n      } else if (error.code === -32002) {\n        console.log('Request already pending - continuing');\n        return; // Don't throw error, just continue\n      } else {\n        // Don't throw error for network issues, just log and continue\n        console.log('Network switch not completed, but wallet connection successful');\n        return; // Allow connection to proceed\n      }\n    } finally {\n      this.pendingRequests.delete(requestKey);\n    }\n  }\n  async checkNetwork() {\n    if (!this.provider) return false;\n    try {\n      const network = await this.provider.getNetwork();\n      const chainId = Number(network.chainId);\n      console.log('Current chain ID:', chainId);\n\n      // Accept multiple potential Fluent chain IDs\n      const validFluentIds = [20994, 84531, 421613];\n      const isValid = validFluentIds.includes(chainId);\n      console.log('Is valid Fluent network:', isValid);\n      return isValid;\n    } catch (error) {\n      console.error('Error checking network:', error);\n      return false;\n    }\n  }\n  async getBalance() {\n    if (!this.provider || !this.account) return '0';\n    try {\n      const balance = await this.provider.getBalance(this.account);\n      return ethers.formatEther(balance);\n    } catch (error) {\n      console.error('Error getting balance:', error);\n      return '0';\n    }\n  }\n  disconnect() {\n    // Clean up event listeners\n    if (window.ethereum) {\n      if (this.accountChangeListener) {\n        window.ethereum.removeListener('accountsChanged', this.accountChangeListener);\n        this.accountChangeListener = null;\n      }\n      if (this.chainChangeListener) {\n        window.ethereum.removeListener('chainChanged', this.chainChangeListener);\n        this.chainChangeListener = null;\n      }\n    }\n\n    // Reset state\n    this.provider = null;\n    this.signer = null;\n    this.account = null;\n    this.isConnected = false;\n    this.pendingRequests.clear();\n    console.log('Wallet disconnected');\n  }\n  formatAddress(address) {\n    if (!address) return '';\n    return `${address.slice(0, 6)}...${address.slice(-4)}`;\n  }\n  async isConnectedAndOnCorrectNetwork() {\n    if (!this.isConnected || !this.provider) return false;\n    return await this.checkNetwork();\n  }\n}\nexport default new WalletManager();","map":{"version":3,"names":["ethers","FLUENT_TESTNET_CONFIG","chainId","chainName","nativeCurrency","name","symbol","decimals","rpcUrls","blockExplorerUrls","WalletManager","constructor","provider","signer","account","isConnected","pendingRequests","Set","checkMetaMask","window","Error","attempts","ethereum","isMetaMask","Promise","resolve","setTimeout","console","warn","checkExistingConnection","accounts","request","method","length","BrowserProvider","getSigner","log","error","connectWallet","skipNetworkSwitch","has","add","switchToFluentTestnet","networkError","message","delete","accountChangeListener","removeListener","disconnect","location","reload","on","chainChangeListener","checkNetwork","isCorrect","isFluentNetwork","toLowerCase","currentChainId","expectedChainId","requestKey","currentChainIdNum","parseInt","fluentChainIdNum","params","switchError","code","network","getNetwork","Number","validFluentIds","isValid","includes","getBalance","balance","formatEther","clear","formatAddress","address","slice","isConnectedAndOnCorrectNetwork"],"sources":["C:/Users/Admin/Desktop/fluent_GJ/frontend/src/utils/wallet.js"],"sourcesContent":["import { ethers } from 'ethers';\r\n\r\n// Official Fluent testnet configuration\r\nconst FLUENT_TESTNET_CONFIG = {\r\n  chainId: '0x51EA', // 20994 in hex\r\n  chainName: 'Fluent Testnet',\r\n  nativeCurrency: {\r\n    name: 'ETH',\r\n    symbol: 'ETH',\r\n    decimals: 18,\r\n  },\r\n  rpcUrls: ['https://rpc.testnet.fluent.xyz'],\r\n  blockExplorerUrls: ['https://testnet.fluentscan.xyz/'],\r\n};\r\n\r\nclass WalletManager {\r\n  constructor() {\r\n    this.provider = null;\r\n    this.signer = null;\r\n    this.account = null;\r\n    this.isConnected = false;\r\n    this.pendingRequests = new Set();\r\n  }\r\n\r\n  async checkMetaMask() {\r\n    // Check if ethereum object exists\r\n    if (typeof window === 'undefined') {\r\n      throw new Error('This application requires a browser environment.');\r\n    }\r\n\r\n    // Wait for MetaMask to inject properly\r\n    let attempts = 0;\r\n    while (attempts < 50) { // Try for up to 5 seconds\r\n      if (window.ethereum && window.ethereum.isMetaMask) {\r\n        return true;\r\n      }\r\n      await new Promise(resolve => setTimeout(resolve, 100));\r\n      attempts++;\r\n    }\r\n\r\n    // Final check for any ethereum provider\r\n    if (window.ethereum) {\r\n      console.warn('Ethereum provider found but not confirmed as MetaMask');\r\n      return true;\r\n    }\r\n\r\n    throw new Error('MetaMask is required to use this dApp.');\r\n  }\r\n\r\n  // Check if already connected (for page refresh)\r\n  async checkExistingConnection() {\r\n    try {\r\n      if (!window.ethereum) return false;\r\n      \r\n      const accounts = await window.ethereum.request({ method: 'eth_accounts' });\r\n      if (accounts.length > 0) {\r\n        this.provider = new ethers.BrowserProvider(window.ethereum);\r\n        this.signer = await this.provider.getSigner();\r\n        this.account = accounts[0];\r\n        this.isConnected = true;\r\n        \r\n        console.log('Existing wallet connection restored:', this.account);\r\n        return true;\r\n      }\r\n      return false;\r\n    } catch (error) {\r\n      console.error('Error checking existing connection:', error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  async connectWallet(skipNetworkSwitch = false) {\r\n    try {\r\n      await this.checkMetaMask();\r\n\r\n      // Safely access ethereum object with error handling\r\n      const ethereum = window.ethereum;\r\n      if (!ethereum) {\r\n        throw new Error('Ethereum provider not found');\r\n      }\r\n\r\n      // Prevent multiple simultaneous requests\r\n      if (this.pendingRequests.has('connect')) {\r\n        throw new Error('Connection request in progress, please wait...');\r\n      }\r\n\r\n      this.pendingRequests.add('connect');\r\n\r\n      try {\r\n        // Request account access\r\n        const accounts = await ethereum.request({\r\n          method: 'eth_requestAccounts',\r\n        });\r\n\r\n        if (accounts.length === 0) {\r\n          throw new Error('No accounts found. Please connect your wallet.');\r\n        }\r\n\r\n        this.provider = new ethers.BrowserProvider(ethereum);\r\n        this.signer = await this.provider.getSigner();\r\n        this.account = accounts[0];\r\n        this.isConnected = true;\r\n\r\n        // Only check network if not explicitly skipped\r\n        if (!skipNetworkSwitch) {\r\n          // Try to switch to Fluent testnet (completely optional)\r\n          try {\r\n            console.log('Attempting to check/switch network...');\r\n            await this.switchToFluentTestnet();\r\n            console.log('Network check/switch completed');\r\n          } catch (networkError) {\r\n            console.log('Network switch skipped:', networkError.message);\r\n            // Silently continue - network switch is completely optional during connection\r\n          }\r\n        } else {\r\n          console.log('Network switch skipped by request');\r\n        }\r\n      } finally {\r\n        this.pendingRequests.delete('connect');\r\n      }\r\n\r\n      // Listen for account changes (remove existing listeners first)\r\n      if (this.accountChangeListener) {\r\n        ethereum.removeListener('accountsChanged', this.accountChangeListener);\r\n      }\r\n      \r\n      this.accountChangeListener = (accounts) => {\r\n        if (accounts.length === 0) {\r\n          this.disconnect();\r\n        } else {\r\n          this.account = accounts[0];\r\n          window.location.reload(); // Reload to refresh the app state\r\n        }\r\n      };\r\n      \r\n      ethereum.on('accountsChanged', this.accountChangeListener);\r\n\r\n      // Listen for network changes (remove existing listeners first)\r\n      if (this.chainChangeListener) {\r\n        ethereum.removeListener('chainChanged', this.chainChangeListener);\r\n      }\r\n      \r\n      this.chainChangeListener = (chainId) => {\r\n        console.log('Network changed to:', chainId);\r\n        window.location.reload(); // Reload to refresh the app state\r\n      };\r\n      \r\n      ethereum.on('chainChanged', this.chainChangeListener);\r\n\r\n      return {\r\n        account: this.account,\r\n        provider: this.provider,\r\n        signer: this.signer,\r\n      };\r\n    } catch (error) {\r\n      console.error('Error connecting wallet:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async checkNetwork() {\r\n    try {\r\n      const ethereum = window.ethereum;\r\n      if (!ethereum) {\r\n        return {\r\n          isCorrect: false,\r\n          error: 'Ethereum provider not available'\r\n        };\r\n      }\r\n\r\n      const chainId = await ethereum.request({ method: 'eth_chainId' });\r\n      const isFluentNetwork = chainId.toLowerCase() === '0x51ea';\r\n      \r\n      if (!isFluentNetwork) {\r\n        console.warn('Not on Fluent testnet. Current chain ID:', chainId);\r\n        return {\r\n          isCorrect: false,\r\n          currentChainId: chainId,\r\n          expectedChainId: '0x51ea'\r\n        };\r\n      }\r\n      \r\n      return {\r\n        isCorrect: true,\r\n        currentChainId: chainId,\r\n        expectedChainId: '0x51ea'\r\n      };\r\n    } catch (error) {\r\n      console.error('Error checking network:', error);\r\n      return {\r\n        isCorrect: false,\r\n        error: error.message\r\n      };\r\n    }\r\n  }\r\n\r\n  async switchToFluentTestnet() {\r\n    const requestKey = 'switchNetwork';\r\n    \r\n    // Prevent duplicate requests\r\n    if (this.pendingRequests.has(requestKey)) {\r\n      console.log('Network switch already in progress, waiting...');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      this.pendingRequests.add(requestKey);\r\n      \r\n      // Safely get ethereum object\r\n      const ethereum = window.ethereum;\r\n      if (!ethereum) {\r\n        throw new Error('Ethereum provider not available');\r\n      }\r\n      \r\n      // First check current network with multiple format checks\r\n      const currentChainId = await ethereum.request({ method: 'eth_chainId' });\r\n      console.log('Current chain ID (raw):', currentChainId);\r\n      \r\n      // Convert to number for comparison\r\n      const currentChainIdNum = parseInt(currentChainId, 16);\r\n      const fluentChainIdNum = parseInt(FLUENT_TESTNET_CONFIG.chainId, 16); // 20994\r\n      \r\n      console.log('Current chain ID (decimal):', currentChainIdNum);\r\n      console.log('Fluent chain ID (decimal):', fluentChainIdNum);\r\n      \r\n      // If already on Fluent testnet, return immediately\r\n      if (currentChainIdNum === fluentChainIdNum) {\r\n        console.log('Already on Fluent testnet - no action needed');\r\n        return;\r\n      }\r\n\r\n      // Try to switch to existing network first\r\n      try {\r\n        await ethereum.request({\r\n          method: 'wallet_switchEthereumChain',\r\n          params: [{ chainId: FLUENT_TESTNET_CONFIG.chainId }],\r\n        });\r\n        console.log('Successfully switched to Fluent testnet');\r\n        return;\r\n      } catch (switchError) {\r\n        console.log('Switch failed:', switchError.code, switchError.message);\r\n        \r\n        // Only add network if it doesn't exist (error 4902)\r\n        if (switchError.code === 4902) {\r\n          console.log('Network not found, attempting to add...');\r\n          await ethereum.request({\r\n            method: 'wallet_addEthereumChain',\r\n            params: [FLUENT_TESTNET_CONFIG],\r\n          });\r\n          console.log('Successfully added and switched to Fluent testnet');\r\n          return;\r\n        } else if (switchError.code === -32002) {\r\n          // Request already pending - just wait and return\r\n          console.log('Request already pending - continuing without network switch');\r\n          return;\r\n        } else {\r\n          throw switchError;\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to switch to Fluent testnet:', error);\r\n      \r\n      // Handle different error cases\r\n      if (error.code === 4001) {\r\n        console.log('User rejected network switch - continuing with current network');\r\n        return; // Don't throw error, just continue\r\n      } else if (error.code === -32002) {\r\n        console.log('Request already pending - continuing');\r\n        return; // Don't throw error, just continue\r\n      } else {\r\n        // Don't throw error for network issues, just log and continue\r\n        console.log('Network switch not completed, but wallet connection successful');\r\n        return; // Allow connection to proceed\r\n      }\r\n    } finally {\r\n      this.pendingRequests.delete(requestKey);\r\n    }\r\n  }\r\n\r\n  async checkNetwork() {\r\n    if (!this.provider) return false;\r\n\r\n    try {\r\n      const network = await this.provider.getNetwork();\r\n      const chainId = Number(network.chainId);\r\n      console.log('Current chain ID:', chainId);\r\n      \r\n      // Accept multiple potential Fluent chain IDs\r\n      const validFluentIds = [20994, 84531, 421613];\r\n      const isValid = validFluentIds.includes(chainId);\r\n      console.log('Is valid Fluent network:', isValid);\r\n      \r\n      return isValid;\r\n    } catch (error) {\r\n      console.error('Error checking network:', error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  async getBalance() {\r\n    if (!this.provider || !this.account) return '0';\r\n\r\n    try {\r\n      const balance = await this.provider.getBalance(this.account);\r\n      return ethers.formatEther(balance);\r\n    } catch (error) {\r\n      console.error('Error getting balance:', error);\r\n      return '0';\r\n    }\r\n  }\r\n\r\n  disconnect() {\r\n    // Clean up event listeners\r\n    if (window.ethereum) {\r\n      if (this.accountChangeListener) {\r\n        window.ethereum.removeListener('accountsChanged', this.accountChangeListener);\r\n        this.accountChangeListener = null;\r\n      }\r\n      if (this.chainChangeListener) {\r\n        window.ethereum.removeListener('chainChanged', this.chainChangeListener);\r\n        this.chainChangeListener = null;\r\n      }\r\n    }\r\n\r\n    // Reset state\r\n    this.provider = null;\r\n    this.signer = null;\r\n    this.account = null;\r\n    this.isConnected = false;\r\n    this.pendingRequests.clear();\r\n    \r\n    console.log('Wallet disconnected');\r\n  }\r\n\r\n  formatAddress(address) {\r\n    if (!address) return '';\r\n    return `${address.slice(0, 6)}...${address.slice(-4)}`;\r\n  }\r\n\r\n  async isConnectedAndOnCorrectNetwork() {\r\n    if (!this.isConnected || !this.provider) return false;\r\n    return await this.checkNetwork();\r\n  }\r\n}\r\n\r\nexport default new WalletManager();\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}