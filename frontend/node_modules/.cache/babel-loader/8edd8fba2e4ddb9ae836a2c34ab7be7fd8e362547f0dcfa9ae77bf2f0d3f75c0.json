{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';const MessageSender=_ref=>{let{onSendMessage,selectedContact,disabled,isLoading}=_ref;const[message,setMessage]=useState('');const[isSending,setIsSending]=useState(false);const[error,setError]=useState('');const textareaRef=useRef(null);useEffect(()=>{// Clear message when switching contacts\nsetMessage('');setError('');},[selectedContact]);useEffect(()=>{// Auto-resize textarea\nif(textareaRef.current){textareaRef.current.style.height='auto';textareaRef.current.style.height=Math.min(textareaRef.current.scrollHeight,120)+'px';}},[message]);const handleSubmit=async e=>{e.preventDefault();if(!message.trim()||!selectedContact||isSending||disabled){return;}setError('');setIsSending(true);try{await onSendMessage(selectedContact,message.trim());setMessage('');// Reset textarea height\nif(textareaRef.current){textareaRef.current.style.height='auto';}}catch(error){console.error('Error sending message:',error);setError(error.message||'Failed to send message');}setIsSending(false);};const handleKeyPress=e=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();handleSubmit(e);}};const formatAddress=address=>{return\"\".concat(address.slice(0,6),\"...\").concat(address.slice(-4));};const canSend=!disabled&&!isLoading&&!isSending&&message.trim()&&selectedContact;return/*#__PURE__*/React.createElement(\"div\",{className:\"message-sender\"},selectedContact&&/*#__PURE__*/React.createElement(\"div\",{className:\"chat-header\"},/*#__PURE__*/React.createElement(\"div\",{className:\"contact-info\"},/*#__PURE__*/React.createElement(\"div\",{className:\"contact-avatar\"},formatAddress(selectedContact).slice(0,2)),/*#__PURE__*/React.createElement(\"div\",{className:\"contact-details\"},/*#__PURE__*/React.createElement(\"div\",{className:\"contact-name\"},formatAddress(selectedContact)),/*#__PURE__*/React.createElement(\"div\",{className:\"contact-status\"},/*#__PURE__*/React.createElement(\"span\",{className:\"status-indicator active\"}),/*#__PURE__*/React.createElement(\"span\",null,\"On Fluent Network\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"chat-actions\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn-icon\",title:\"View on Explorer\",onClick:()=>window.open(\"https://testnet.fluentscan.xyz/address/\".concat(selectedContact),'_blank')},\"\\uD83D\\uDD0D\"))),error&&/*#__PURE__*/React.createElement(\"div\",{className:\"error-bar\"},/*#__PURE__*/React.createElement(\"span\",{className:\"error-icon\"},\"\\u26A0\\uFE0F\"),/*#__PURE__*/React.createElement(\"span\",{className:\"error-text\"},error),/*#__PURE__*/React.createElement(\"button\",{className:\"error-close\",onClick:()=>setError('')},\"\\u2716\\uFE0F\")),/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit,className:\"message-input-form\"},/*#__PURE__*/React.createElement(\"div\",{className:\"message-input-container\"},/*#__PURE__*/React.createElement(\"textarea\",{ref:textareaRef,value:message,onChange:e=>setMessage(e.target.value),onKeyPress:handleKeyPress,placeholder:selectedContact?\"Type a message...\":\"Select a contact to start messaging\",disabled:disabled||isLoading||isSending||!selectedContact,className:\"message-input\",rows:1,maxLength:1000}),/*#__PURE__*/React.createElement(\"div\",{className:\"input-actions\"},/*#__PURE__*/React.createElement(\"div\",{className:\"character-count\"},/*#__PURE__*/React.createElement(\"span\",{className:message.length>900?'warning':''},message.length,\"/1000\")),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"send-button \".concat(canSend?'active':'disabled'),disabled:!canSend,title:!selectedContact?\"Select a contact first\":!message.trim()?\"Type a message\":isSending?\"Sending...\":\"Send message\"},isSending?/*#__PURE__*/React.createElement(\"div\",{className:\"sending-animation\"},/*#__PURE__*/React.createElement(\"div\",{className:\"spinner small\"})):/*#__PURE__*/React.createElement(\"span\",{className:\"send-icon\"},\"\\uD83D\\uDCE4\")))),message.trim()&&/*#__PURE__*/React.createElement(\"div\",{className:\"message-preview\"},/*#__PURE__*/React.createElement(\"small\",null,\"\\uD83D\\uDCB0 \",/*#__PURE__*/React.createElement(\"strong\",null,\"Gas required:\"),\" Sending this message will require a small gas fee\"))),!selectedContact&&/*#__PURE__*/React.createElement(\"div\",{className:\"no-contact-selected\"},/*#__PURE__*/React.createElement(\"div\",{className:\"no-contact-message\"},/*#__PURE__*/React.createElement(\"span\",{className:\"icon\"},\"\\uD83D\\uDC48\"),/*#__PURE__*/React.createElement(\"span\",null,\"Select a contact from the sidebar to start messaging\"))),disabled&&selectedContact&&/*#__PURE__*/React.createElement(\"div\",{className:\"sender-disabled\"},/*#__PURE__*/React.createElement(\"div\",{className:\"disabled-message\"},/*#__PURE__*/React.createElement(\"span\",{className:\"icon\"},\"\\uD83D\\uDD10\"),/*#__PURE__*/React.createElement(\"span\",null,\"Please connect your wallet to send messages\"))),isLoading&&selectedContact&&/*#__PURE__*/React.createElement(\"div\",{className:\"sender-loading\"},/*#__PURE__*/React.createElement(\"div\",{className:\"loading-message\"},/*#__PURE__*/React.createElement(\"div\",{className:\"spinner small\"}),/*#__PURE__*/React.createElement(\"span\",null,\"Loading conversation...\"))));};export default MessageSender;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}